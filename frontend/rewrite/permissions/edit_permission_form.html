
<!-- #modal-dialog -->
<div class="modal fade" id="editPermissionModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                <h4 class="modal-title">Permission add/edit</h4>
            </div>
            <div class="alert alert-danger" ng-show="vm.errors.message">
                Errors, the backend responded: {{ vm.errors.message }}
            </div>
            <div class="alert alert-danger" ng-show="vm.errors.permission_unique">
                Errors, the backend responded: {{ vm.errors.permission_unique }}
            </div>
            <form name="permissionForm" ng-submit="vm.savePermissionForm()" class="margin-bottom-0" novalidate>
                <div class="modal-body">
                    <div class="form-group m-b-20">
                        <label for="scope">Scope*</label>
                        <input type="text" id="scope" class="form-control" ng-model="vm.edited_permission.scope" placeholder="Permission scope" required/>
                        <p class="label label-danger" ng-show="vm.errors.scope">{{ vm.errors.scope }}</p>
                    </div>
                    <div class="form-group m-b-20">
                        <label for="action">Action*</label>
                        <input type="text" id="action" class="form-control" ng-model="vm.edited_permission.action" placeholder="Permission action" required/>
                        <p class="label label-danger" ng-show="vm.errors.action">{{ vm.errors.action }}</p>
                    </div>
                    <div class="form-group m-b-20">
                        <label for="object">Object*</label>
                        <input type="text" id="object" class="form-control" ng-model="vm.edited_permission.object" placeholder="Permission object" required/>
                        <p class="label label-danger" ng-show="vm.errors.object">{{ vm.errors.object }}</p>
                    </div>
                    <div class="form-group m-b-20">
                        <label for="description">Description</label>
                        <input type="text" id="description" class="form-control" ng-model="vm.edited_permission.description" placeholder="Type what the permission does"/>
                        <p class="label label-danger" ng-show="vm.errors.description">{{ vm.errors.description }}</p>
                    </div>
                    <div class="form-group m-b-20">
                        <label for="always_assigned" class="form-check-label">Always Assigned</label>
                        <input type="checkbox" id="always_assigned" class="form-check-input" ng-model="vm.edited_permission.always_assigned" ng-init="vm.edited_permission.always_assigned = vm.edited_permission.always_assigned || false" />
                        <p class="label label-danger" ng-show="vm.errors.always_assigned">{{ vm.errors.always_assigned }}</p>
                    </div>
                    <div class="form-group m-b-20">
                        <label>Filters</label>
                        <ul>
                            <li ng-repeat="filter in vm.edited_permission.filters">
                                {{ filter.field }} 
                                <button type="button" class="btn-xs btn-danger" ng-click="vm.edited_permission.filters.splice($index, 1)"><i class="fa fa-minus"></i></button>
                            </li>
                        </ul>
                        <div class="input-group">
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-primary" ng-click="vm.edited_permission.filters.push({field: new_filter}); new_filter=null;"><i class="fa fa-plus"></i></button>
                            </span>                        
                            <input type="text" class="form-control" ng-model="new_filter" placeholder="Type an attibute filter" />
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <!--<button class="btn btn-sm btn-danger" data-dismiss="modal"><i class="fa fa-ban"></i> Close</button>-->
                    <button class="btn btn-sm btn-success" type="submit"><i class="fa fa-save"></i> Save permission</button>
                </div>
            </form>
        </div>
    </div>
</div>
